{"version":3,"file":"animate.js","sources":["../../../src/js/components/animate.ts"],"sourcesContent":["/**\n * Animate\n */\n\n// Animates elements when scrolled into view.\n// When page loads, animation classes are removed from elements\n// then added back when scrolled into view.\n\n// TODO: for infinite animations, keep observer active\n//    and disable animation when out of view\n\nconst ANIMATE_SELECTOR = \"[class*=animate-]\"\n\ninterface AnimateElem extends HTMLElement {\n  dataset: {\n    animate: string\n  }\n}\n\nconst observer = new IntersectionObserver((entries) => {\n  entries.forEach((entry) => {\n    if (entry.isIntersecting) {\n      const elem = entry.target as AnimateElem\n      elem.classList.add(...elem.dataset.animate.split(\",\"))\n      observer.unobserve(elem)\n    }\n  })\n})\n\nconst processElem = async (elem: AnimateElem) => {\n  const animClasses: Array<string> = []\n  elem.classList.forEach((cls) => {\n    if (cls.substring(0, 8) === \"animate-\") {\n      animClasses.push(cls)\n    }\n  })\n  elem.dataset.animate = animClasses.join(\",\")\n  elem.classList.remove(...animClasses)\n  observer.observe(elem)\n}\n\nconst run = () => {\n  document.querySelectorAll<AnimateElem>(ANIMATE_SELECTOR).forEach((elem) => {\n    processElem(elem)\n  })\n}\n\nconst init = async () => {\n  if (\n    document.readyState === \"complete\" ||\n    document.readyState === \"interactive\"\n  ) {\n    setTimeout(run, 10)\n  } else {\n    document.addEventListener(\"DOMContentLoaded\", () => {\n      setTimeout(run, 10)\n    })\n  }\n}\n\nexport default { init }\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAWA,MAAM,gBAAmB,GAAA,mBAAA,CAAA;AAQzB,MAAM,QAAW,GAAA,IAAI,oBAAqB,CAAA,CAAC,OAAY,KAAA;AACrD,EAAQ,OAAA,CAAA,OAAA,CAAQ,CAAC,KAAU,KAAA;AACzB,IAAA,IAAI,MAAM,cAAgB,EAAA;AACxB,MAAA,MAAM,OAAO,KAAM,CAAA,MAAA,CAAA;AACnB,MAAK,IAAA,CAAA,SAAA,CAAU,IAAI,GAAG,IAAA,CAAK,QAAQ,OAAQ,CAAA,KAAA,CAAM,GAAG,CAAC,CAAA,CAAA;AACrD,MAAA,QAAA,CAAS,UAAU,IAAI,CAAA,CAAA;AAAA,KACzB;AAAA,GACD,CAAA,CAAA;AACH,CAAC,CAAA,CAAA;AAED,MAAM,WAAA,GAAc,CAAO,IAAsB,KAAA,OAAA,CAAA,KAAA,CAAA,EAAA,IAAA,EAAA,aAAA;AAC/C,EAAA,MAAM,cAA6B,EAAC,CAAA;AACpC,EAAK,IAAA,CAAA,SAAA,CAAU,OAAQ,CAAA,CAAC,GAAQ,KAAA;AAC9B,IAAA,IAAI,GAAI,CAAA,SAAA,CAAU,CAAG,EAAA,CAAC,MAAM,UAAY,EAAA;AACtC,MAAA,WAAA,CAAY,KAAK,GAAG,CAAA,CAAA;AAAA,KACtB;AAAA,GACD,CAAA,CAAA;AACD,EAAA,IAAA,CAAK,OAAQ,CAAA,OAAA,GAAU,WAAY,CAAA,IAAA,CAAK,GAAG,CAAA,CAAA;AAC3C,EAAK,IAAA,CAAA,SAAA,CAAU,MAAO,CAAA,GAAG,WAAW,CAAA,CAAA;AACpC,EAAA,QAAA,CAAS,QAAQ,IAAI,CAAA,CAAA;AACvB,CAAA,CAAA,CAAA;AAEA,MAAM,MAAM,MAAM;AAChB,EAAA,QAAA,CAAS,gBAA8B,CAAA,gBAAgB,CAAE,CAAA,OAAA,CAAQ,CAAC,IAAS,KAAA;AACzE,IAAA,WAAA,CAAY,IAAI,CAAA,CAAA;AAAA,GACjB,CAAA,CAAA;AACH,CAAA,CAAA;AAEA,MAAM,OAAO,MAAY,OAAA,CAAA,KAAA,CAAA,EAAA,IAAA,EAAA,aAAA;AACvB,EAAA,IACE,QAAS,CAAA,UAAA,KAAe,UACxB,IAAA,QAAA,CAAS,eAAe,aACxB,EAAA;AACA,IAAA,UAAA,CAAW,KAAK,EAAE,CAAA,CAAA;AAAA,GACb,MAAA;AACL,IAAS,QAAA,CAAA,gBAAA,CAAiB,oBAAoB,MAAM;AAClD,MAAA,UAAA,CAAW,KAAK,EAAE,CAAA,CAAA;AAAA,KACnB,CAAA,CAAA;AAAA,GACH;AACF,CAAA,CAAA,CAAA;AAEA,cAAe,EAAE,IAAK,EAAA;;;;"}