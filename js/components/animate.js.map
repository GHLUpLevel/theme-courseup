{"version":3,"file":"animate.js","sources":["../../../src/js/components/animate.ts"],"sourcesContent":["/**\n * Animate\n */\n\n// Animates elements when scrolled into view.\n// When page loads, animation classes are removed from elements\n// then added back when scrolled into view.\n\n// TODO: for infinite animations, keep observer active\n//    and disable animation when out of view\n\nconst ANIMATE_SELECTOR = \"[class*=animate-]\"\nconst PLAY_CLASS = \"animate-play\"\n\ninterface AnimateElem extends HTMLElement {\n  dataset: {\n    animate: string\n  }\n}\n\nconst observer = new IntersectionObserver((entries) => {\n  entries.forEach((entry) => {\n    if (entry.isIntersecting) {\n      const elem = entry.target as AnimateElem\n      observer.unobserve(elem)\n      elem.classList.add(PLAY_CLASS)\n    }\n  })\n})\n\nconst processElem = async (elem: AnimateElem) => {\n  const animClasses: Array<string> = []\n  observer.observe(elem)\n}\n\nconst run = () => {\n  document.querySelectorAll<AnimateElem>(ANIMATE_SELECTOR).forEach((elem) => {\n    processElem(elem)\n  })\n}\n\nconst init = async () => {\n  if (\n    document.readyState === \"complete\" ||\n    document.readyState === \"interactive\"\n  ) {\n    setTimeout(run, 10)\n  } else {\n    document.addEventListener(\"DOMContentLoaded\", () => {\n      setTimeout(run, 10)\n    })\n  }\n}\n\nexport default { init }\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAWA,MAAM,gBAAmB,GAAA,mBAAA,CAAA;AACzB,MAAM,UAAa,GAAA,cAAA,CAAA;AAQnB,MAAM,QAAW,GAAA,IAAI,oBAAqB,CAAA,CAAC,OAAY,KAAA;AACrD,EAAQ,OAAA,CAAA,OAAA,CAAQ,CAAC,KAAU,KAAA;AACzB,IAAA,IAAI,MAAM,cAAgB,EAAA;AACxB,MAAA,MAAM,OAAO,KAAM,CAAA,MAAA,CAAA;AACnB,MAAA,QAAA,CAAS,UAAU,IAAI,CAAA,CAAA;AACvB,MAAK,IAAA,CAAA,SAAA,CAAU,IAAI,UAAU,CAAA,CAAA;AAAA,KAC/B;AAAA,GACD,CAAA,CAAA;AACH,CAAC,CAAA,CAAA;AAED,MAAM,WAAA,GAAc,CAAO,IAAsB,KAAA,OAAA,CAAA,KAAA,CAAA,EAAA,IAAA,EAAA,aAAA;AAE/C,EAAA,QAAA,CAAS,QAAQ,IAAI,CAAA,CAAA;AACvB,CAAA,CAAA,CAAA;AAEA,MAAM,MAAM,MAAM;AAChB,EAAA,QAAA,CAAS,gBAA8B,CAAA,gBAAgB,CAAE,CAAA,OAAA,CAAQ,CAAC,IAAS,KAAA;AACzE,IAAA,WAAA,CAAY,IAAI,CAAA,CAAA;AAAA,GACjB,CAAA,CAAA;AACH,CAAA,CAAA;AAEA,MAAM,OAAO,MAAY,OAAA,CAAA,KAAA,CAAA,EAAA,IAAA,EAAA,aAAA;AACvB,EAAA,IACE,QAAS,CAAA,UAAA,KAAe,UACxB,IAAA,QAAA,CAAS,eAAe,aACxB,EAAA;AACA,IAAA,UAAA,CAAW,KAAK,EAAE,CAAA,CAAA;AAAA,GACb,MAAA;AACL,IAAS,QAAA,CAAA,gBAAA,CAAiB,oBAAoB,MAAM;AAClD,MAAA,UAAA,CAAW,KAAK,EAAE,CAAA,CAAA;AAAA,KACnB,CAAA,CAAA;AAAA,GACH;AACF,CAAA,CAAA,CAAA;AAEA,cAAe,EAAE,IAAK,EAAA;;;;"}